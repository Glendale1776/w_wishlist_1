# Context Lock

- Slice: S-04
- Title: Claim and contribution connector APIs
- Topic: brief.md
- Commit: b6116ae
- Timestamp: 2026-02-18T17:01:24+0300

## Implemented
- Added POST endpoints: /api/w/[shareToken]/reserve, /release, /purchase, /contribute.
- Added shared mutation core with constant-time share-token matching and typed error model.
- Added required auth + idempotency-key checks and per-item lock serialization for deterministic conflicts.
- Added contribution validation (minimum 100 cents) and aggregate state responses.
- Added structured JSON logs with correlationId, action, actor, item, and result code.
- Marked S-04 done and moved it to docs/slices/done/.

## Validation
- npm run typecheck: failed (tsc command not found) because dependencies are not installed.
- npm run build: failed (next command not found) because dependencies are not installed.
