# Context Lock

- Slice: S-05
- Title: Uploads, previews, and metadata limits
- Topic: brief.md
- Commit: 0507935
- Timestamp: 2026-02-18T17:11:49+0300

## Implemented
- Added upload validation and signed-access storage helpers in app/api/uploads/_lib/storage.ts.
- Added /api/uploads POST endpoint with auth, MIME/size checks, and storage path generation for avatar/cover/item kinds.
- Added /api/uploads/file GET endpoint for signed URL verification and gated file reads.
- Added /api/metadata/fetch POST endpoint with SSRF checks, redirect checks, and timeout-bounded metadata parsing.
- Updated owner editor to support image upload/preview/replace, metadata autofill, and manual fallback editing.
- Added env defaults for upload size, metadata timeout, and upload signing key.
- Marked S-05 done and moved it to docs/slices/done/.

## Validation
- npm run typecheck: failed (tsc command not found) because dependencies are not installed.
- npm run build: failed (next command not found) because dependencies are not installed.
